<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GreenThumb - Pots & Planters</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">
                <a href="index.html">GreenThumb</a>
            </div>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="plants.html">Plants</a></li>
                    <li><a href="tools.html">Tools</a></li>
                    <li><a href="pots.html">Pots & Planters</a></li> <li><a href="seeds.html">Seeds</a></li>
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </nav>
            <div class="header-icons">
                <a href="#" class="search-icon"><i class="fas fa-search"></i></a>
                <a href="#" class="cart-icon" id="cart-icon-header">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count">0</span>
                </a>
            </div>
        </div>
    </header>

    <main class="section plants-section">
        <div class="container">
            <h1>Pots & Planters Collection</h1>
            <p class="description-text">Find the perfect home for your plants with our diverse range of pots, planters, and decorative containers.</p>

            <div class="filters-container">
                <div class="filter-group">
                    <label for="category-filter">Material:</label>
                    <select id="category-filter">
                        <option value="all">All Materials</option>
                        <option value="ceramic">Ceramic</option>
                        <option value="terracotta">Terracotta</option>
                        <option value="plastic">Plastic</option>
                        <option value="metal">Metal</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="price-filter">Price:</label>
                    <select id="price-filter">
                        <option value="all">All Prices</option>
                        <option value="0-300">₹0 - ₹300</option>
                        <option value="301-700">₹301 - ₹700</option>
                        <option value="701+">₹701+</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="sort-filter">Sort By:</label>
                    <select id="sort-filter">
                        <option value="default">Default</option>
                        <option value="price-asc">Price: Low to High</option>
                        <option value="price-desc">Price: High to Low</option>
                        <option value="name-asc">Name: A-Z</option>
                        <option value="name-desc">Name: Z-A</option>
                    </select>
                </div>

                <div class="filter-group search-group">
                    <label for="search-input">Search:</label>
                    <input type="text" id="search-input" placeholder="e.g., ceramic, hanging...">
                    <button id="search-button" class="btn"><i class="fas fa-search"></i></button>
                </div>
            </div>

            <section id="item-listing" class="plant-grid">
                <div class="plant-card" data-category="ceramic" data-price="450" data-name="Glossy Ceramic Pot">
                    <img src="https://via.placeholder.com/300x150?text=Ceramic+Pot" alt="Glossy Ceramic Pot">
                    <h3>Glossy Ceramic Pot</h3>
                    <p class="plant-category">Ceramic</p>
                    <p class="plant-description">Stylish and durable, perfect for indoor plants. Available in various colors.</p>
                    <div class="price">₹450</div>
                    <button class="btn add-to-cart-btn">Add to Cart</button>
                </div>

                <div class="plant-card" data-category="terracotta" data-price="200" data-name="Terracotta Clay Pot">
                    <img src="https://via.placeholder.com/300x150?text=Terracotta+Pot" alt="Terracotta Clay Pot">
                    <h3>Terracotta Clay Pot</h3>
                    <p class="plant-category">Terracotta</p>
                    <p class="plant-description">Classic breathable pot, ideal for succulents and plants needing good drainage.</p>
                    <div class="price">₹200</div>
                    <button class="btn add-to-cart-btn">Add to Cart</button>
                </div>

                <div class="plant-card" data-category="plastic" data-price="120" data-name="Lightweight Plastic Pot">
                    <img src="https://via.placeholder.com/300x150?text=Plastic+Pot" alt="Lightweight Plastic Pot">
                    <h3>Lightweight Plastic Pot</h3>
                    <p class="plant-category">Plastic</p>
                    <p class="plant-description">Economical and versatile, suitable for both indoor and outdoor use.</p>
                    <div class="price">₹120</div>
                    <button class="btn add-to-cart-btn">Add to Cart</button>
                </div>

                <div class="plant-card" data-category="metal" data-price="600" data-name="Decorative Metal Planter">
                    <img src="https://via.placeholder.com/300x150?text=Metal+Planter" alt="Decorative Metal Planter">
                    <h3>Decorative Metal Planter</h3>
                    <p class="plant-category">Metal</p>
                    <p class="plant-description">Modern design, adds an industrial touch to your plant display.</p>
                    <div class="price">₹600</div>
                    <button class="btn add-to-cart-btn">Add to Cart</button>
                </div>
                </section>

            <div id="pagination-controls" class="pagination-controls">
                </div>
        </div>
    </main>

    <footer>
        <div class="container footer-grid">
            <div class="footer-col">
                <h4>GreenThumb</h4>
                <p>Your ultimate destination for premium plants and expert care, designed to bring nature's tranquility into your life.</p>
            </div>
            <div class="footer-col">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="plants.html">Plants</a></li>
                    <li><a href="tools.html">Tools</a></li>
                    <li><a href="pots.html">Pots & Planters</a></li>
                    <li><a href="seeds.html">Seeds</a></li>
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="contact.html">Contact</a></li>
                    <li><a href="#">FAQs</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h4>Contact Us</h4>
                <p><i class="fas fa-map-marker-alt"></i> 123 Green Avenue, Garden City, Earth</p>
                <p><i class="fas fa-phone"></i> +91 98765 43210</p>
                <p><i class="fas fa-envelope"></i> support@greenthumb.com</p>
            </div>
            <div class="footer-col">
                <h4>Follow Us</h4>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            &copy; 2024 GreenThumb. All rights reserved.
        </div>
    </footer>

    <div id="cartModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Your Shopping Cart</h2>
            <div id="cart-items">
                <p>Your cart is empty.</p>
            </div>
            <div class="cart-summary">
                <p>Total: ₹<span id="cart-total">0</span></p>
                <button class="btn secondary-btn" id="clear-cart-btn">Clear Cart</button>
                <button class="btn" id="checkout-btn">Proceed to Checkout</button>
            </div>
        </div>
    </div>

    <script src="js/script.js"></script>
    <script>
        // Replicate the filtering and pagination logic from plants.html
        const itemListing = document.getElementById('item-listing');
        const categoryFilter = document.getElementById('category-filter');
        const priceFilter = document.getElementById('price-filter');
        const sortFilter = document.getElementById('sort-filter');
        const searchInput = document.getElementById('search-input');
        const searchButton = document.getElementById('search-button');
        const paginationControls = document.getElementById('pagination-controls');
        const cartCountHeader = document.querySelector('#cart-icon-header .cart-count');

        let allItems = [];
        let filteredAndSortedItems = [];
        let currentPage = 1;
        const itemsPerPage = 9;

        function loadItems() {
            populateFilterOptions();

            allItems = Array.from(itemListing.children)
                .filter(el => el.classList.contains('plant-card'))
                .map(card => {
                    return {
                        element: card,
                        name: card.querySelector('h3').textContent.toLowerCase(),
                        category: card.dataset.category.toLowerCase(),
                        price: parseFloat(card.querySelector('.price').textContent.replace('₹', '')),
                        description: card.querySelector('.plant-description').textContent.toLowerCase()
                    };
                });

            applyFiltersAndSort();
        }

        function populateFilterOptions() {
            // Category Filter Options for Pots
            const categories = [
                { value: 'all', text: 'All Materials' },
                { value: 'ceramic', text: 'Ceramic' },
                { value: 'terracotta', text: 'Terracotta' },
                { value: 'plastic', text: 'Plastic' },
                { value: 'metal', text: 'Metal' }
            ];
            categoryFilter.innerHTML = categories.map(cat => `<option value="${cat.value}">${cat.text}</option>`).join('');

            // Price Filter Options
            const priceRanges = [
                { value: 'all', text: 'All Prices' },
                { value: '0-300', text: '₹0 - ₹300' },
                { value: '301-700', text: '₹301 - ₹700' },
                { value: '701+', text: '₹701+' }
            ];
            priceFilter.innerHTML = priceRanges.map(range => `<option value="${range.value}">${range.text}</option>`).join('');
        }

        function applyFiltersAndSort() {
            let tempItems = [...allItems];

            const selectedCategory = categoryFilter.value;
            if (selectedCategory !== 'all') {
                tempItems = tempItems.filter(item => item.category === selectedCategory);
            }

            const selectedPriceRange = priceFilter.value;
            if (selectedPriceRange !== 'all') {
                tempItems = tempItems.filter(item => {
                    const price = item.price;
                    if (selectedPriceRange === '0-300') return price >= 0 && price <= 300;
                    if (selectedPriceRange === '301-700') return price > 300 && price <= 700;
                    if (selectedPriceRange === '701+') return price > 700;
                    return true;
                });
            }

            const searchTerm = searchInput.value.toLowerCase().trim();
            if (searchTerm) {
                tempItems = tempItems.filter(item =>
                    item.name.includes(searchTerm) ||
                    item.category.includes(searchTerm) ||
                    item.description.includes(searchTerm)
                );
            }

            const sortOrder = sortFilter.value;
            if (sortOrder === 'price-asc') {
                tempItems.sort((a, b) => a.price - b.price);
            } else if (sortOrder === 'price-desc') {
                tempItems.sort((a, b) => b.price - a.price);
            } else if (sortOrder === 'name-asc') {
                tempItems.sort((a, b) => a.name.localeCompare(b.name));
            } else if (sortOrder === 'name-desc') {
                tempItems.sort((a, b) => b.name.localeCompare(a.name));
            }

            filteredAndSortedItems = tempItems;
            currentPage = 1;
            renderItems();
            updatePagination();
        }

        function renderItems() {
            itemListing.innerHTML = '';
            if (filteredAndSortedItems.length === 0) {
                itemListing.innerHTML = '<p class="no-results">No pots or planters found matching your criteria.</p>';
                return;
            }

            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const itemsToDisplay = filteredAndSortedItems.slice(startIndex, endIndex);

            itemsToDisplay.forEach(item => {
                itemListing.appendChild(item.element);
                item.element.style.display = 'flex';
            });

            allItems.forEach(item => {
                if (!itemsToDisplay.includes(item)) {
                    item.element.style.display = 'none';
                }
            });
        }

        function updatePagination() {
            paginationControls.innerHTML = '';
            const totalPages = Math.ceil(filteredAndSortedItems.length / itemsPerPage);

            if (totalPages <= 1) return;

            const prevButton = document.createElement('button');
            prevButton.textContent = 'Previous';
            prevButton.classList.add('pagination-btn');
            prevButton.disabled = currentPage === 1;
            prevButton.addEventListener('click', () => {
                currentPage--;
                renderItems();
                updatePagination();
            });
            paginationControls.appendChild(prevButton);

            for (let i = 1; i <= totalPages; i++) {
                const pageButton = document.createElement('button');
                pageButton.textContent = i;
                pageButton.classList.add('pagination-btn');
                if (i === currentPage) {
                    pageButton.classList.add('active');
                }
                pageButton.addEventListener('click', () => {
                    currentPage = i;
                    renderItems();
                    updatePagination();
                });
                paginationControls.appendChild(pageButton);
            }

            const nextButton = document.createElement('button');
            nextButton.textContent = 'Next';
            nextButton.classList.add('pagination-btn');
            nextButton.disabled = currentPage === totalPages;
            nextButton.addEventListener('click', () => {
                currentPage++;
                renderItems();
                updatePagination();
            });
            paginationControls.appendChild(nextButton);
        }

        categoryFilter.addEventListener('change', applyFiltersAndSort);
        priceFilter.addEventListener('change', applyFiltersAndSort);
        sortFilter.addEventListener('change', applyFiltersAndSort);
        searchInput.addEventListener('input', applyFiltersAndSort);
        searchButton.addEventListener('click', applyFiltersAndSort);

        // --- Shopping Cart (Reusing existing script.js functions) ---
        const cartModal = document.getElementById('cartModal');
        const cartIconHeader = document.getElementById('cart-icon-header');
        const closeButton = document.querySelector('.modal .close-button');
        const clearCartBtn = document.getElementById('clear-cart-btn');
        const checkoutBtn = document.getElementById('checkout-btn');

        let cartItems = JSON.parse(localStorage.getItem('cart')) || [];

        function updateCartCount() {
            cartCountHeader.textContent = cartItems.reduce((sum, item) => sum + item.quantity, 0);
        }

        function renderCartItems() {
            const cartItemsContainer = document.getElementById('cart-items');
            const cartTotalSpan = document.getElementById('cart-total');
            cartItemsContainer.innerHTML = '';
            let total = 0;

            if (cartItems.length === 0) {
                cartItemsContainer.innerHTML = '<p>Your cart is empty.</p>';
            } else {
                cartItems.forEach(item => {
                    const itemElement = document.createElement('div');
                    itemElement.classList.add('cart-item');
                    itemElement.innerHTML = `
                        <img src="${item.imgSrc}" alt="${item.name}">
                        <div class="cart-item-details">
                            <h4>${item.name}</h4>
                            <p>₹${item.price.toFixed(2)}</p>
                        </div>
                        <div class="cart-item-quantity">
                            <button data-id="${item.id}" data-action="decrease">-</button>
                            <span>${item.quantity}</span>
                            <button data-id="${item.id}" data-action="increase">+</button>
                        </div>
                        <button class="remove-from-cart-btn" data-id="${item.id}">Remove</button>
                    `;
                    cartItemsContainer.appendChild(itemElement);
                    total += item.price * item.quantity;
                });
            }
            cartTotalSpan.textContent = total.toFixed(2);
            updateCartCount();
            localStorage.setItem('cart', JSON.stringify(cartItems));
        }

        function addToCart(itemData) {
            const existingItem = cartItems.find(item => item.id === itemData.id);
            if (existingItem) {
                existingItem.quantity++;
            } else {
                cartItems.push({
                    id: itemData.id,
                    name: itemData.name,
                    price: itemData.price,
                    imgSrc: itemData.imgSrc,
                    quantity: 1
                });
            }
            renderCartItems();
            cartModal.style.display = 'flex';
        }

        itemListing.addEventListener('click', (event) => {
            if (event.target.classList.contains('add-to-cart-btn')) {
                const card = event.target.closest('.plant-card');
                const itemData = {
                    id: card.dataset.name,
                    name: card.querySelector('h3').textContent,
                    price: parseFloat(card.querySelector('.price').textContent.replace('₹', '')),
                    imgSrc: card.querySelector('img').src
                };
                addToCart(itemData);
            }
        });

        cartIconHeader.addEventListener('click', (event) => {
            event.preventDefault();
            renderCartItems();
            cartModal.style.display = 'flex';
        });

        closeButton.addEventListener('click', () => {
            cartModal.style.display = 'none';
        });

        window.addEventListener('click', (event) => {
            if (event.target === cartModal) {
                cartModal.style.display = 'none';
            }
        });

        clearCartBtn.addEventListener('click', () => {
            cartItems = [];
            renderCartItems();
        });

        checkoutBtn.addEventListener('click', () => {
            alert('Proceeding to checkout! (This is a dummy action)');
            cartModal.style.display = 'none';
        });

        document.getElementById('cart-items').addEventListener('click', (event) => {
            const target = event.target;
            if (target.classList.contains('remove-from-cart-btn')) {
                const idToRemove = target.dataset.id;
                cartItems = cartItems.filter(item => item.id !== idToRemove);
                renderCartItems();
            } else if (target.dataset.action === 'increase') {
                const idToUpdate = target.dataset.id;
                const item = cartItems.find(i => i.id === idToUpdate);
                if (item) {
                    item.quantity++;
                    renderCartItems();
                }
            } else if (target.dataset.action === 'decrease') {
                const idToUpdate = target.dataset.id;
                const item = cartItems.find(i => i.id === idToUpdate);
                if (item && item.quantity > 1) {
                    item.quantity--;
                    renderCartItems();
                } else if (item && item.quantity === 1) {
                    cartItems = cartItems.filter(i => i.id !== idToUpdate);
                    renderCartItems();
                }
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            loadItems(); // Call loadItems for this page
            updateCartCount();
        });
    </script>
</body>
</html>